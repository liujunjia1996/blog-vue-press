import{f as h}from"./index.6e03100f.js";import{M as v,d as p}from"./Month.cd955d0f.js";import{_ as y,e as T,o as l,c as _,a as o,t as m,F as b,r as x,i as f,j as k}from"./app.b4870c90.js";const M={components:{Month:v},data(){return{loading:!1,streak:0,totalActiveDays:0,submitList:[],timeline:[]}},computed:{amount(){return this.submitList.reduce((t,n)=>t+n.count,0)}},methods:{initMonths(){let t=0;const n=[],c=p();for(;t<=12;){const e=c.subtract(t,"month");e.daysInMonth();let i=e.startOf("month"),s=e.endOf("month");t===0&&(s=e),t===12&&(i=e),n.unshift({startTime:i,endTime:s}),t++}const d=[...n].reverse(),a=[];d.reduce((e,i)=>{const{startTime:s,endTime:r}=i,u=(r.date()-s.date()+1+e)%7;return a.push({startTime:s.valueOf(),endTime:r.valueOf(),indent:7-u}),u},0),this.timeline=a.reverse()},initRecentData(t){},initCalendarData(t){const{userCalendar:n}=t,{streak:c,totalActiveDays:d,submissionCalendar:a}=n;this.streak=c,this.totalActiveDays=d;const e=JSON.parse(a);this.submitList=Object.keys(e).map(i=>({time:i,count:e[i]}))}},mounted(){this.initMonths(),Promise.all([h("http://138.2.9.115:8080/recentSubmit/renlindong"),h("http://138.2.9.115:8080/calendar/renlindong")]).then(([t,n])=>{this.initRecentData(t),this.initCalendarData(n)})}},D={class:"calendar"},L={class:"flex"},C={class:"text-base"},g=f(" \u8FC7\u53BB\u4E00\u5E74\u4E00\u5171\u63D0\u4EA4\u4E86 "),O={class:"font-bold text-2xl"},w=f(" \u6B21 "),A={class:"flex ml-auto"},B={class:"flex mt-4"};function S(t,n,c,d,a,e){const i=T("Month");return l(),_("div",D,[o("div",L,[o("div",C,[g,o("span",O,m(e.amount),1),w]),o("div",A,[o("div",null," \u7D2F\u8BA1\u63D0\u4EA4\uFF1A"+m(a.totalActiveDays),1),o("div",null," \u8FDE\u7EED\u63D0\u4EA4\uFF1A"+m(a.streak),1)])]),o("div",B,[(l(!0),_(b,null,x(a.timeline,(s,r)=>(l(),k(i,{class:"mr-4",key:r,showMonth:r>=1,indent:s.indent,startTime:s.startTime,endTime:s.endTime,days:s.days,submitList:a.submitList},null,8,["showMonth","indent","startTime","endTime","days","submitList"]))),128))])])}var V=y(M,[["render",S],["__file","index.vue"]]);export{V as default};
