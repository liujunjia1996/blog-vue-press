import{b as n}from"./app.1d685fa0.js";import{_ as a}from"./plugin-vue_export-helper.21dcd24c.js";const s={},e=n(`<p>\u4ECA\u5929\u65B0\u4E0A\u7684\u4E00\u4E2A\u670D\u52A1\uFF0C\u672C\u5730\u8DD1\u6CA1\u4EC0\u4E48\u95EE\u9898\uFF0C\u4F46\u662F\u53D1\u5230\u6D4B\u8BD5\u73AF\u5883\u542F\u52A8\u5C31\u62A5\u9519\u4E86\uFF1A</p><div class="language-log ext-log line-numbers-mode"><pre class="language-log"><code><span class="token date number">2021-08-31</span> <span class="token time number">10:04:51.964</span> <span class="token level error important">ERROR</span> <span class="token punctuation">[</span>SpringApplication<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">843</span><span class="token punctuation">]</span> <span class="token operator">-</span> Application run failed

<span class="token property">org.springframework.beans.factory.BeanCurrentlyInCreationException:</span> 
Error creating bean with name <span class="token string">&#39;publicKeyDao&#39;</span><span class="token operator">:</span> 
Bean with name <span class="token string">&#39;publicKeyDao&#39;</span> has been injected into other beans <span class="token punctuation">[</span>mqConsumerService<span class="token punctuation">]</span> in its raw version as part of a circular reference<span class="token punctuation">,</span> 
but has eventually been wrapped<span class="token punctuation">.</span> This means that said other beans do not use the final version of the bean<span class="token punctuation">.</span> 
This is often the result of over<span class="token operator">-</span>eager type matching <span class="token operator">-</span> consider using <span class="token string">&#39;getBeanNamesForType&#39;</span> with the <span class="token string">&#39;allowEagerInit&#39;</span> flag turned off<span class="token punctuation">,</span> for example<span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u540E\u6765\u901A\u8FC7 @lazy \u6CE8\u89E3\uFF0C\u8BA9\u8FD9\u4E2A Bean \u60F0\u6027\u521D\u59CB\u5316\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqConsumer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token class-name">ConfigManager</span> configManager<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Lazy</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token class-name">PublicKeyDao</span> publicKeyDao<span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u4F46\u662F\u540E\u6765\u8F6C\u5FF5\u4E00\u60F3\uFF0C\u51FA\u73B0\u5FAA\u73AF\u4F9D\u8D56\u7684\u95EE\u9898\uFF0C\u5927\u6982\u7387\u662F\u56E0\u4E3A\u9879\u76EE\u7684\u7ED3\u6784\u4E0D\u5408\u7406\uFF0C\u4F4E\u5C42\u7EC4\u4EF6\u4F9D\u8D56\u4E86\u9AD8\u5C42\u7EC4\u4EF6\u3002</p><p>\u4E00\u4E2A\u597D\u7684\u4EE3\u7801\u7ED3\u6784\u7684\u4F9D\u8D56\u5173\u7CFB\u6700\u597D\u662F\u5355\u5411\u7684\uFF0C\u6BD4\u5982\u4F20\u7EDF\u7684 mvc \u67B6\u6784\uFF0Ccontroller -&gt; service -&gt; dao \uFF1B\u518D\u6BD4\u5982 ddd \u5FAE\u670D\u52A1\u8BBE\u8BA1\u601D\u60F3\u4E5F\u662F\u5E94\u7528\u5C42\u8C03\u7528\u9886\u57DF\u5C42\uFF0C\u9886\u57DF\u5C42\u518D\u8C03\u7528\u57FA\u7840\u8BBE\u65BD\u3002</p><p>\u6700\u540E\uFF0C\u6211\u4FEE\u6539\u4E86\u9879\u76EE\u7ED3\u6784\u800C\u4E0D\u662F\u6DFB\u52A0 @lazy \u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002</p><hr><p>\u8DD1\u4E2A\u9898\uFF0C\u804A\u4E00\u4E0B spring \u5982\u4F55\u89E3\u51B3 bean \u5FAA\u73AF\u4F9D\u8D56\u7684\u95EE\u9898</p><h2 id="spring-\u521B\u5EFA-bean-\u7684\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#spring-\u521B\u5EFA-bean-\u7684\u6D41\u7A0B" aria-hidden="true">#</a> spring \u521B\u5EFA bean \u7684\u6D41\u7A0B</h2><p>\u5B9E\u4F8B\u5316\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u51FA\u5B9E\u4F8B<br> \u6CE8\u5165\uFF0C\u586B\u5145\u5C5E\u6027<br> \u521D\u59CB\u5316\uFF0C\u6267\u884C\u5404\u79CD\u56DE\u8C03</p><h2 id="\u4E09\u7EA7\u7F13\u5B58" tabindex="-1"><a class="header-anchor" href="#\u4E09\u7EA7\u7F13\u5B58" aria-hidden="true">#</a> \u4E09\u7EA7\u7F13\u5B58</h2><p>singletonObjects \u5355\u4F8B\u6C60<br> earlySingletonObjects \u534A\u6210\u54C1\u6C60<br> singletonFactories \u5DE5\u5382\u65B9\u6CD5\u6C60\uFF0Clamda</p><h2 id="\u4E00\u7EA7\u7F13\u5B58\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#\u4E00\u7EA7\u7F13\u5B58\u7684\u4F5C\u7528" aria-hidden="true">#</a> \u4E00\u7EA7\u7F13\u5B58\u7684\u4F5C\u7528</h2><p>\u7F13\u5B58\u6210\u54C1 bean</p><h2 id="\u4E8C\u7EA7\u7F13\u5B58\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u7EA7\u7F13\u5B58\u7684\u4F5C\u7528" aria-hidden="true">#</a> \u4E8C\u7EA7\u7F13\u5B58\u7684\u4F5C\u7528</h2><p>\u7F13\u5B58\u534A\u6210\u54C1 bean</p><h3 id="\u4E09\u7EA7\u7F13\u5B58\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#\u4E09\u7EA7\u7F13\u5B58\u7684\u4F5C\u7528" aria-hidden="true">#</a> \u4E09\u7EA7\u7F13\u5B58\u7684\u4F5C\u7528</h3><p>\u7F13\u5B58\u80FD\u66B4\u9732\u51FA bean \u7684\u5DE5\u5382\u65B9\u6CD5\uFF0C\u4F7F\u5F97\u53EF\u4EE5\u63D0\u524D\u83B7\u53D6\u5230 bean</p><h3 id="\u4E09\u7EA7\u7F13\u5B58\u4E3A\u4EC0\u4E48\u662F\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u4E09\u7EA7\u7F13\u5B58\u4E3A\u4EC0\u4E48\u662F\u65B9\u6CD5" aria-hidden="true">#</a> \u4E09\u7EA7\u7F13\u5B58\u4E3A\u4EC0\u4E48\u662F\u65B9\u6CD5</h3><p>\u4E0D\u4EC5\u8981\u66B4\u9732\u51FA bean\uFF0C\u8FD8\u8981\u6267\u884C\u4E00\u4E9B\u540E\u7F6E\u5904\u7406\u5668<br> lamda \u5B58\u7684\u662F\u8FD9\u4E2A\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">getEarlyBeanReference</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">RootBeanDefinition</span> mbd<span class="token punctuation">,</span> <span class="token class-name">Object</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span> exposedObject <span class="token operator">=</span> bean<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mbd<span class="token punctuation">.</span><span class="token function">isSynthetic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">hasInstantiationAwareBeanPostProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">BeanPostProcessor</span> bp <span class="token operator">:</span> <span class="token function">getBeanPostProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>bp <span class="token keyword">instanceof</span> <span class="token class-name">SmartInstantiationAwareBeanPostProcessor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">SmartInstantiationAwareBeanPostProcessor</span> ibp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SmartInstantiationAwareBeanPostProcessor</span><span class="token punctuation">)</span> bp<span class="token punctuation">;</span>
                exposedObject <span class="token operator">=</span> ibp<span class="token punctuation">.</span><span class="token function">getEarlyBeanReference</span><span class="token punctuation">(</span>exposedObject<span class="token punctuation">,</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> exposedObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u5982\u679C\u6CA1\u6709 aop \u60C5\u51B5\u8FD9\u4E2A\u65B9\u6CD5\u76F8\u5F53\u4E8E\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Object</span> exposedObject <span class="token operator">=</span> bean<span class="token punctuation">;</span> 
<span class="token keyword">return</span> exposedObject
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u5982\u679C\u6709 aop\uFF0C\u5C31\u4F1A\u521B\u5EFA\u51FA\u4EE3\u7406\u5BF9\u8C61\u518D\u8FD4\u56DE</p><h3 id="\u6574\u4F53\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u6574\u4F53\u6D41\u7A0B" aria-hidden="true">#</a> \u6574\u4F53\u6D41\u7A0B</h3><p>Spring \u901A\u8FC7\u4E09\u7EA7\u7F13\u5B58\u89E3\u51B3\u4E86\u5FAA\u73AF\u4F9D\u8D56\uFF0C\u5176\u4E2D\u4E00\u7EA7\u7F13\u5B58\u4E3A\u5355\u4F8B\u6C60\uFF08singletonObjects\uFF09,\u4E8C\u7EA7\u7F13\u5B58\u4E3A\u65E9\u671F\u66DD\u5149\u5BF9\u8C61earlySingletonObjects\uFF0C\u4E09\u7EA7\u7F13\u5B58\u4E3A\u65E9\u671F\u66DD\u5149\u5BF9\u8C61\u5DE5\u5382\uFF08singletonFactories\uFF09\u3002\u5F53 A\u3001B \u4E24\u4E2A\u7C7B\u53D1\u751F\u5FAA\u73AF\u5F15\u7528\u65F6\uFF0C\u5728A \u5B8C\u6210\u5B9E\u4F8B\u5316\u540E\uFF0C\u5C31\u4F7F\u7528\u5B9E\u4F8B\u5316\u540E\u7684\u5BF9\u8C61\u53BB\u521B\u5EFA\u4E00\u4E2A\u5BF9\u8C61\u5DE5\u5382\uFF0C\u5E76\u6DFB\u52A0\u5230\u4E09\u7EA7\u7F13\u5B58\u4E2D\uFF0C\u5982\u679C A \u88AB AOP \u4EE3\u7406\uFF0C\u90A3\u4E48\u901A\u8FC7\u8FD9\u4E2A\u5DE5\u5382\u83B7\u53D6\u5230\u7684\u5C31\u662F A \u4EE3\u7406\u540E\u7684\u5BF9\u8C61\uFF0C\u5982\u679C A \u6CA1\u6709\u88AB AOP \u4EE3\u7406\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u5DE5\u5382\u83B7\u53D6\u5230\u7684\u5C31\u662F A \u5B9E\u4F8B\u5316\u7684\u5BF9\u8C61\u3002\u5F53 A \u8FDB\u884C\u5C5E\u6027\u6CE8\u5165\u65F6\uFF0C\u4F1A\u53BB\u521B\u5EFA B\uFF0C\u540C\u65F6 B \u53C8\u4F9D\u8D56\u4E86 A\uFF0C\u6240\u4EE5\u521B\u5EFA B \u7684\u540C\u65F6\u53C8\u4F1A\u53BB\u8C03\u7528 getBean(a) \u6765\u83B7\u53D6\u9700\u8981\u7684\u4F9D\u8D56\uFF0C\u6B64\u65F6\u7684getBean(a) \u4F1A\u4ECE\u7F13\u5B58\u4E2D\u83B7\u53D6\uFF0C\u7B2C\u4E00\u6B65\uFF0C\u5148\u83B7\u53D6\u5230\u4E09\u7EA7\u7F13\u5B58\u4E2D\u7684\u5DE5\u5382\uFF1B\u7B2C\u4E8C\u6B65\uFF0C\u8C03\u7528\u5BF9\u8C61\u5DE5\u5DE5\u5382\u7684 getObject \u65B9\u6CD5\u6765\u83B7\u53D6\u5230\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF0C\u5F97\u5230\u8FD9\u4E2A\u5BF9\u8C61\u540E\u5C06\u5176\u6CE8\u5165\u5230 B \u4E2D\u3002\u7D27\u63A5\u7740 B \u4F1A\u8D70\u5B8C\u5B83\u7684\u751F\u547D\u5468\u671F\u6D41\u7A0B\uFF0C\u5305\u62EC\u521D\u59CB\u5316\u3001\u540E\u7F6E\u5904\u7406\u5668\u7B49\u3002\u5F53 B \u521B\u5EFA\u5B8C\u540E\uFF0C\u4F1A\u5C06 B \u518D\u6CE8\u5165\u5230 A \u4E2D\uFF0C\u6B64\u65F6 A \u518D\u5B8C\u6210\u5B83\u7684\u6574\u4E2A\u751F\u547D\u5468\u671F\u3002<br><img src="https://user-images.githubusercontent.com/43411944/139638865-d9e95af5-fd5f-4106-9468-df69f8e35b54.png" alt="image"></p><h2 id="springboot-2-6-\u9ED8\u8BA4\u60C5\u51B5\u7981\u6B62-bean-\u7684\u5FAA\u73AF\u5F15\u7528" tabindex="-1"><a class="header-anchor" href="#springboot-2-6-\u9ED8\u8BA4\u60C5\u51B5\u7981\u6B62-bean-\u7684\u5FAA\u73AF\u5F15\u7528" aria-hidden="true">#</a> springboot 2.6 \u9ED8\u8BA4\u60C5\u51B5\u7981\u6B62 Bean \u7684\u5FAA\u73AF\u5F15\u7528</h2><p>\u65B0\u7248\u7684 springboot \u5DF2\u7ECF\u9ED8\u8BA4\u4E0D\u8FDB\u884C\u5FAA\u73AF\u5F15\u7528\u7684\u5904\u7406\uFF0C\u4F1A\u76F4\u63A5\u62A5\u9519</p>`,29);function p(t,o){return e}var l=a(s,[["render",p]]);export{l as default};
