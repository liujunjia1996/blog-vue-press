import{_ as a,o as e,c as s,d as n}from"./app.8928cebf.js";const t={},r=n(`<p>最近有个项目定时任务调度老是失败，手动 postman 调用却没问题<br> 首先调整了网关微服务的日志级别，发现请求没进来<br> 然后登录了 nginx 服务器，查看了 access.log 后，发现报 400，但是仅凭 400 也看不出问题来<br> 接着，在 nginx 那台自己上运行 tcpdump 进行抓包</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>tcpdump <span class="token parameter variable">-i</span> eth0 <span class="token parameter variable">-nn</span> <span class="token parameter variable">-s0</span> <span class="token parameter variable">-v</span> port <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>发现传入了两个 Authorization，于是用 postman 也构造了这样的请求，发现果然报 400<br> 最后检查代码，发现框架封装的代码里有自动填充 Authorization 的逻辑，但是这个逻辑有 bug，不够健壮，他应该先判断有没有，如果没有再做自动填充。</p>`,3),c=[r];function o(p,i){return e(),s("div",null,c)}const d=a(t,[["render",o],["__file","记一次400报错.html.vue"]]);export{d as default};
