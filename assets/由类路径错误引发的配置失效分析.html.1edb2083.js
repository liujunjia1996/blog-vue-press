import{c as a}from"./app.029038d3.js";import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";const s={},e=a(`<h2 id="\u73B0\u8C61" tabindex="-1"><a class="header-anchor" href="#\u73B0\u8C61" aria-hidden="true">#</a> \u73B0\u8C61</h2><p>\u6709\u4E00\u4E2A\u65B0\u4E0A\u7684\u670D\u52A1\uFF0C\u63A5\u5165\u4E86 esa-conf (\u52A8\u6001\u914D\u7F6E)\u8FD9\u4E2A\u4E2D\u95F4\u4EF6\u3002\u53D1\u5230\u6D4B\u8BD5\u73AF\u5883\u540E\uFF0C\u53D1\u73B0\uFF0C</p><p>\u5BF9\u4E8E application.properties \u914D\u7F6E\u6587\u4EF6\uFF0C\u4E0D\u7BA1\u662F\u521D\u59CB\u503C\u7684\u83B7\u53D6\u8FD8\u662F\u914D\u7F6E\u7684\u52A8\u6001\u66F4\u65B0\u90FD\u662F\u6B63\u5E38\u7684\uFF0C\u4F46\u662F\u5BF9\u4E8E log4j2.xml \u8FD9\u4E2A\u6587\u4EF6\uFF0C\u670D\u52A1\u597D\u50CF\u5B8C\u5168\u6CA1\u6709\u8BFB\u53D6\u3002</p><p>\u9664\u6B64\u4EE5\u5916\uFF0C\u672C\u5730\u73AF\u5883\u4F7F\u7528 esa-conf \u4E0B\u53D1 log4j2.xml \u5374\u662F\u6CA1\u6709\u95EE\u9898\u7684\u3002</p><h2 id="\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u5206\u6790" aria-hidden="true">#</a> \u5206\u6790</h2><p>\u5206\u6790 esa-conf \u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u67E5\u770B esa-conf \u7684\u542F\u52A8\u65E5\u5FD7\uFF0C\u5F97\u51FA esa-conf \u7684\u542F\u52A8\u6D41\u7A0B\u5927\u6982\u662F\u8FD9\u6837\u7684\uFF1A</p><ol><li>\u6839\u636E\u5E94\u7528 id\u3001\u73AF\u5883\u7B49\u4FE1\u606F\uFF0C\u4ECE\u914D\u7F6E\u4E2D\u5FC3\uFF0C\u83B7\u53D6\u5F53\u524D\u670D\u52A1\u7684\u914D\u7F6E\u6211\u5C31\u5217\u8868</li><li>\u5F97\u5230\u5217\u8868\u540E\uFF0C\u5C06\u914D\u7F6E\u6587\u4EF6\u4E00\u4E00\u4E0B\u8F7D\u5230\u4E34\u65F6\u76EE\u5F55</li><li>\u83B7\u53D6\u5F53\u524D\u7A0B\u5E8F\u7684\u7C7B\u8DEF\u5F84</li><li>\u5C06\u4E34\u65F6\u76EE\u5F55\u7684\u914D\u7F6E\u6587\u4EF6\u62F7\u8D1D\u5230\u7B2C 3 \u6B65\u5F97\u5230\u7684\u8DEF\u5F84</li><li>\u626B\u63CF\u52A8\u6001\u914D\u7F6E\u7684\u6CE8\u89E3\uFF0C\u8BFB\u53D6\u6587\u4EF6\uFF0C\u8FDB\u884C\u503C\u7684\u6CE8\u5165</li><li>......</li></ol><p>\u5BF9\u6BD4\u6B63\u5E38\u7684\u670D\u52A1\uFF0C\u53D1\u73B0\u7B2C 3 \u6B65\u83B7\u53D6\u7C7B\u8DEF\u5F84\u65F6\uFF0Cesa-conf \u83B7\u53D6\u7684\u503C\u662F\u4E00\u4E2A jar \u5305\u5185\u7684\u8DEF\u5F84\uFF0C\u800C\u6B63\u5E38\u670D\u52A1\u7684\u7C7B\u8DEF\u5F84\u662F\u540E\u7F00\u4E3A ./conf \u7684\u5B57\u7B26\u4E32</p><p>\u6240\u4EE5\u5E94\u8BE5\u662F\u7C7B\u8DEF\u5F84\u9519\u8BEF\u5BFC\u81F4\u7684 log4j2 \u7684\u914D\u7F6E\u5931\u6548\uFF0C\u4F46\u662F\u4E3A\u4EC0\u4E48 application.xml \u6CA1\u6709\u5931\u6548\u5462\uFF0C\u731C\u6D4B\u5E94\u8BE5\u662F esa-conf \u91CD\u5199\u4E86 spring-boot \u52A0\u8F7D application.xml \u7684\u903B\u8F91\uFF0C\u800C\u5BF9\u4E8E log4j2 esa-conf \u6CA1\u6709\u7279\u6B8A\u5904\u7406\uFF0C\u6240\u4EE5\u5F53\u7C7B\u8DEF\u5F84\u914D\u7F6E\u9519\u8BEF\u65F6\uFF0Clog4j2 \u65E0\u6CD5\u8BFB\u53D6\u5230 log4j2.xml \u914D\u7F6E\u6587\u4EF6\u3002</p><h2 id="\u89E3\u51B3" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3" aria-hidden="true">#</a> \u89E3\u51B3</h2><h3 id="classpath-\u57FA\u7840\u77E5\u8BC6" tabindex="-1"><a class="header-anchor" href="#classpath-\u57FA\u7840\u77E5\u8BC6" aria-hidden="true">#</a> classPath \u57FA\u7840\u77E5\u8BC6</h3><p>\u65E2\u7136\u5DF2\u7ECF\u5224\u65AD\u4E86\u662F cp \u7684\u95EE\u9898\uFF0C\u90A3\u9996\u5148\u8981\u4E86\u89E3 cp \u7684\u6765\u6E90\uFF1A</p><ul><li><p>\u201C. \u201D\uFF0C \u5373\u5F53\u524D\u76EE\u5F55\uFF0C\u7F3A\u7701\u503C</p></li><li><p>\u73AF\u5883\u53D8\u91CF</p></li><li><p>-cp \u53C2\u6570</p></li><li><p>jar \u7684 MANIFEST.MF \u4E2D Class-Path \u7684\u914D\u7F6E</p></li></ul><p>\u865A\u62DF\u673A\u5BF9 cp \u7684\u5904\u7406\u903B\u8F91\u662F\u8FD9\u6837\u7684\uFF1A</p><p>\u5982\u679C\u6CA1\u6709\u4F7F\u7528 java -jar \u542F\u52A8\uFF0C\u90A3\u4E48 jvm \u4F1A\u4F18\u5148\u8BFB\u53D6 -cp \u53C2\u6570\uFF0C\u5982\u679C\u6CA1\u6709 -cp\uFF0C\u5C31\u4F1A\u8BFB\u73AF\u5883\u53D8\u91CF\u7684\u914D\u7F6E\uFF0C\u5982\u4E5F\u6CA1\u6709\u73AF\u5883\u53D8\u91CF\u5C31\u4F1A\u4F7F\u7528\u7F3A\u7701\u503C\u3002</p><p>\u4F46\u662F\uFF0C\u5982\u679C\u4F7F\u7528 java -jar \u7684\u65B9\u5F0F\u542F\u52A8\uFF0C\u90A3\u4E48\u65E0\u8BBA\u662F -cp \u8FD8\u662F \u73AF\u5883\u53D8\u91CF\u7684\u503C\u90FD\u4F1A\u88AB <em><strong>\u5FFD\u7565</strong></em> \uFF01</p><p>\u76EE\u524D\u5F88\u591A java \u9879\u76EE\u57FA\u672C\u90FD\u662F\u901A\u8FC7 java -jar \u547D\u4EE4\u6765\u542F\u52A8\u7684\uFF0C\u6240\u4EE5\u5F53\u7C7B\u8DEF\u5F84\u51FA\u73B0\u95EE\u9898\u65F6\uFF0C\u65E0\u8BBA\u600E\u4E48\u4FEE\u6539 -cp \u8FD8\u662F\u73AF\u5883\u53D8\u91CF\u90FD\u662F\u6CA1\u6709\u610F\u4E49\u7684\u3002</p><h3 id="\u9879\u76EE\u6267\u884C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u6267\u884C\u6D41\u7A0B" aria-hidden="true">#</a> \u9879\u76EE\u6267\u884C\u6D41\u7A0B</h3><p>\u8981\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u9700\u8981\u4E86\u89E3\u4E00\u4E2A java \u9879\u76EE\u7684\u6253\u5305\u548C\u6267\u884C\u5168\u6D41\u7A0B\u3002</p><p>\u9996\u5148\u662F\u6301\u7EED\u96C6\u6210\uFF0C\u901A\u5E38\u4E00\u4E2A java \u9879\u76EE\u53EF\u4EE5\u901A\u8FC7\u4E8C\u8005\u4E4B\u4E00\u6253\u5305\uFF1A</p><ul><li>spring-boot-maven-plugin</li><li>maven-jar-plugin</li></ul><p>\u6253\u6210 jar \u5305\u4E4B\u540E\uFF0C\u518D\u901A\u8FC7</p><ul><li>maven-assembly-plugin</li></ul><p>\u6253\u6210 zip\uFF0C\u6253\u6210 zip \u540E \uFF0C\u4E91\u5E73\u53F0\u5982\u679C\u662F\u955C\u50CF\u90E8\u7F72\uFF0C\u4F1A\u518D\u6784\u5EFA\u6210 Linux \u955C\u50CF\u540E\u4E0A\u4F20\u5230\u7248\u672C\u5E93\uFF08\u5305\u90E8\u7F72\u5C31\u76F4\u63A5\u4E0A\u4F20\u4E86\uFF09</p><p>\u6301\u7EED\u90E8\u7F72\u65F6\uFF0C\u5BB9\u5668\u901A\u8FC7\u8C03\u7528\u9879\u76EE\u5185\u7F6E\u7684\u542F\u52A8\u811A\u672C\u6765\u542F\u52A8\u9879\u76EE\u3002</p><p>\u8981\u786E\u4FDD\u7C7B\u8DEF\u5F84\u4E0D\u51FA\u9519\uFF0C\u6253\u5305\u63D2\u4EF6\u7684\u914D\u7F6E\u548C\u542F\u52A8\u811A\u672C\u90FD\u6709\u4E00\u4E9B\u8981\u6C42\u3002</p><h3 id="java-\u542F\u52A8\u6307\u5B9A\u7C7B\u8DEF\u5F84" tabindex="-1"><a class="header-anchor" href="#java-\u542F\u52A8\u6307\u5B9A\u7C7B\u8DEF\u5F84" aria-hidden="true">#</a> java \u542F\u52A8\u6307\u5B9A\u7C7B\u8DEF\u5F84</h3><p>\u7528\u4EE5\u4E0B\u65B9\u5F0F\u542F\u52A8\uFF0C\u4EE5 -cp \u53C2\u6570\u6307\u5B9A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>java -cp &#39;conf:lib/*:.&#39;  com.xx.xx.Application
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u6211\u4EEC\u56E2\u961F\u5927\u90E8\u5206\u7684\u9879\u76EE\u90FD\u4E0D\u662F\u8FD9\u6837\u542F\u52A8\u7684\uFF0C\u56E0\u4E3A\u8FD9\u6837\u5199\u4F1A\u5BFC\u81F4\u542F\u52A8\u811A\u672C\u4E0D\u901A\u7528\uFF08\u6BCF\u4E2A\u9879\u76EE\u7684\u4E3B\u7C7B\u4E0D\u4E00\u6837\uFF09\uFF0C\u5199\u5728\u8FD9\u91CC\u4EC5\u4F9B\u53C2\u8003\u3002</p><h3 id="java-jar-\u542F\u52A8\u6307\u5B9A\u7C7B\u8DEF\u5F84" tabindex="-1"><a class="header-anchor" href="#java-jar-\u542F\u52A8\u6307\u5B9A\u7C7B\u8DEF\u5F84" aria-hidden="true">#</a> java -jar \u542F\u52A8\u6307\u5B9A\u7C7B\u8DEF\u5F84</h3><h4 id="spring-boot-maven-plugin" tabindex="-1"><a class="header-anchor" href="#spring-boot-maven-plugin" aria-hidden="true">#</a> spring-boot-maven-plugin</h4><p>\u5982\u679C\u91C7\u7528 spring-boot \u63D0\u4F9B\u7684\u6253\u5305\u65B9\u5F0F\uFF0C\u6253\u51FA\u6765\u7684 jar \u5305\u53EF\u4EE5\u79F0\u4E3A fat-jar \uFF0C\u5373\u4E00\u4E2A jar \u5305\u91CC\u5305\u542B\u4E86\u4E1A\u52A1\u4EE3\u7801\u548C\u5B83\u7684\u6240\u6709\u4F9D\u8D56\u3002</p><p>spring \u5C01\u88C5\u4E86\u4E00\u4E9B maven \u6253\u5305\u7684\u903B\u8F91\uFF0C\u4F7F spring-boot-maven-plugin \u6253\u5305\u786E\u4FDD\u7C7B\u8DEF\u5F84\u6B63\u786E\u9700\u8981\u914D\u7F6E\u4EE5\u4E0B\u4E24\u70B9\uFF1A</p><ol><li>layout \u914D\u7F6E\u4E3A zip</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layout</span><span class="token punctuation">&gt;</span></span>ZIP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layout</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>layout \u6709\u4E09\u4E2A\u4E3B\u8981\u7684\u53EF\u80FD\u7684\u503C\uFF1A</p><p>\u200B a. JAR\uFF0C\u5373\u901A\u5E38\u7684\u53EF\u6267\u884C jar\uFF0Cmain-class \u662F org.springframework.boot.loader.jarLauncher</p><p>\u200B b. WAR\uFF0C\u901A\u5E38\u7684\u53EF\u6267\u884C war\uFF0Cmain-class \u662F org.springframework.boot.loader.warLauncher</p><p>\u200B c. ZIP\uFF0C\u5373\u901A\u5E38\u7684\u53EF\u6267\u884C jar\uFF0Cmain-class \u662F org.springframework.boot.loader.propertiesLauncher</p><blockquote><p>The <code>org.springframework.boot.loader.Launcher</code> class is a special bootstrap class that is used as an executable jar\u2019s main entry point. It is the actual <code>Main-Class</code> in your jar file, and it is used to setup an appropriate <code>URLClassLoader</code> and ultimately call your <code>main()</code> method.</p><p>There are three launcher subclasses (<code>JarLauncher</code>, <code>WarLauncher</code>, and <code>PropertiesLauncher</code>). Their purpose is to load resources (<code>.class</code> files and so on) from nested jar files or war files in directories (as opposed to those explicitly on the classpath). In the case of <code>JarLauncher</code> and <code>WarLauncher</code>, the nested paths are fixed. <code>JarLauncher</code> looks in <code>BOOT-INF/lib/</code>, and <code>WarLauncher</code> looks in <code>WEB-INF/lib/</code> and <code>WEB-INF/lib-provided/</code>. You can add extra jars in those locations if you want more. The <code>PropertiesLauncher</code> looks in <code>BOOT-INF/lib/</code> in your application archive by default. You can add additional locations by setting an environment variable called <code>LOADER_PATH</code> or <code>loader.path</code> in <code>loader.properties</code> (which is a comma-separated list of directories, archives, or directories within archives).</p></blockquote><p>main-class \u662F jar \u6587\u4EF6\u7684\u5B9E\u9645\u4E3B\u7C7B\uFF0C\u5B83\u81EA\u5B9A\u4E49\u4E86\u7C7B\u52A0\u8F7D\u5668\uFF0C\u4ECE spring \u81EA\u5B9A\u4E49\u7ED3\u6784\u7684\u80D6 jar \u4E2D\u52A0\u8F7D\u7C7B\uFF0C\u6700\u7EC8\u518D\u8C03\u7528\u9879\u76EE\u91CC\u7684\u4E3B\u7C7B\uFF0C\u5C06\u670D\u52A1\u542F\u52A8\u8D77\u6765\u3002</p><p>\u5176\u4E2D launcher \u662F propertiesLauncher \u65F6\u624D\u53EF\u4EE5\u7528\u542F\u52A8\u53C2\u6570\u8BBE\u7F6E\u5916\u90E8\u7684\u7C7B\u8DEF\u5F84\u3002</p><ol start="2"><li>\u542F\u52A8\u53C2\u6570\u52A0 -Dloader.path = xxx</li></ol><p>\u5F53\u4E14\u4EC5\u5F53 layout \u4E3A ZIP \u65F6\u8FD9\u4E2A\u53C2\u6570\u624D\u751F\u6548\uFF0C\u8FD9\u6837\u624D\u80FD\u6307\u5B9A\u9879\u76EE\u7684\u7C7B\u8DEF\u5F84</p><ol start="3"><li>\u5176\u6B21\uFF0C\u53EF\u80FD\u662F esa-conf \u7684 bug\uFF0C\u7528 spring-boot-maven-plugin \u6253\u5305\u65F6\u542F\u52A8\u7C7B\u91CC\u53EF\u80FD\u8FD8\u9700\u8981\u518D\u52A0\u4E00\u6B21</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>HeraclesBootstrap.getInstance();
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="maven-jar-plugin" tabindex="-1"><a class="header-anchor" href="#maven-jar-plugin" aria-hidden="true">#</a> maven-jar-plugin</h4><p>\u5F53\u7528 maven-jar-plugin \u6253\u5305\u65F6\uFF0C\u9700\u8981\u6DFB\u52A0\u6B64\u884C\u6765\u6307\u5B9A\u7C7B\u8DEF\u5F84\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifestEntries</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Class-Path</span><span class="token punctuation">&gt;</span></span>../conf/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Class-Path</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifestEntries</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,50);function p(t,o){return e}var i=n(s,[["render",p]]);export{i as default};
